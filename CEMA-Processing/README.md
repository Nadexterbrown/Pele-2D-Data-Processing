---

# Pele-2D-CEMA-Analysis

This repository contains the `Pele-2D-CEMA-Analysis.py` script, which performs Chemical Explosive Mode Analysis (CEMA) on 2D Direct Numerical Simulation (DNS) data generated by the PeleC code. The script processes the data to extract flame contours, compute source terms, and analyze the chemical modes.

**Note: This script is a work in progress and currently does not work.**

## Table of Contents

- Installation
- Usage
- Functions
  - Global Variables
  - Global Classes
  - Data Handling Functions
  - External Data Handling Functions
  - DNS Data Processing Functions
  - CEMA Functions
  - General Mathematics Processing Functions
- Main Script
- License

## Installation

To run this script, you need to have the following Python packages installed:

- `os`
- `yt`
- `multiprocessing`
- `re`
- `itertools`
- `scipy`
- `matplotlib`
- `cantera`
- `numpy`
- `geomdl`

You can install these packages using `pip`:

```bash
pip install os yt multiprocessing re itertools scipy matplotlib cantera numpy geomdl
```

## Usage

To use the script, simply run it with Python:

```bash
python Pele-2D-CEMA-Analysis.py
```

The script will initialize parameters, load DNS data, and perform CEMA to analyze the chemical modes.

## Functions

### Global Variables

- `n_procs`: Number of processors to use for parallel processing.
- `data_set`: Name of the dataset to be analyzed.

### Global Classes

- `MyClass`: A class to store and manage input parameters such as temperature, pressure, equivalence ratio, fuel type, mechanism file, and species list.

### Data Handling Functions

- `initialize_parameters(T, P, Phi, Fuel, mech, nitrogenAmount=0)`: Initialize the input parameters.
- `parallel_processing_function(iter_arr, const_list, predicate, **kwargs)`: Perform parallel processing using `multiprocessing.Pool`.

### External Data Handling Functions

- `ensure_long_path_prefix(path)`: Ensure that the path uses the long path prefix if necessary.
- `sort_files(file_list)`: Sort a list of file paths based on numeric parts in the folder names.

### DNS Data Processing Functions

- `pelec_flame_data(args)`: Process DNS data to extract flame data.
- `flame_contour(data_info, y_loc=None, box_bnds=False, box_size=None, tracking_str='Temp', tracking_val=2000)`: Extract flame contour from DNS data.
- `flame_points(data)`: Extract flame points from the contour.
- `flame_normal(contour)`: Compute normal vectors along the flame contour.
- `flame_normal_val(data, normal_pts, normal_arr, var, marker_val=None, PLT_FLAG=False)`: Interpolate values along the flame normal.

### CEMA Functions

- `cantera_enthalpy(data)`: Compute species enthalpy using Cantera.
- `cema_source_terms(data)`: Compute source terms for CEMA.
- `cema_jacobian(data, jacobian_numerator)`: Compute the Jacobian matrix for CEMA.
- `cema_mode(data, jacobian, g_w, g_d, g_r, g_T, flame_pts)`: Analyze the chemical modes using the Jacobian matrix and source terms.

### General Mathematics Processing Functions

- `spatial_derivative(arr, dx, direction)`: Compute spatial derivatives.
- `temporal_derivative()`: Compute temporal derivatives (not implemented).
- `steady_state(arr)`: Compute steady-state values.
- `total_derivative(dfdt, dfdx=None, dfdy=None, x_vel=None, y_vel=None)`: Compute total derivatives.

## Main Script

The main script initializes the input parameters, loads DNS data, and performs CEMA to analyze the chemical modes. It also plots the results.

## License

This project is licensed under the MIT License.

---
